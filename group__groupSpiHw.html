<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-45200435-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-45200435-3', { 'anonymize_ip': true });
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CCxxxx Driver: SPI Hardware Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CCxxxx Driver
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SPI Hardware Implementation</div>  </div>
</div><!--header-->
<div class="contents">

<p>Required MCU-to-CCxxxx functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga195f83026d3def3fec3bb132bf3dcfa4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__groupSpiHw.html#ga195f83026d3def3fec3bb132bf3dcfa4">ccxSpiInit</a> (void)</td></tr>
<tr class="memdesc:ga195f83026d3def3fec3bb132bf3dcfa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the SPI hardware.  <a href="#ga195f83026d3def3fec3bb132bf3dcfa4">More...</a><br /></td></tr>
<tr class="separator:ga195f83026d3def3fec3bb132bf3dcfa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4ee589c5868eedad1243cfc2a1e83a4b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__groupSpiHw.html#ga4ee589c5868eedad1243cfc2a1e83a4b">ccxSpiShutdown</a> (void)</td></tr>
<tr class="memdesc:ga4ee589c5868eedad1243cfc2a1e83a4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown the SPI hardware.  <a href="#ga4ee589c5868eedad1243cfc2a1e83a4b">More...</a><br /></td></tr>
<tr class="separator:ga4ee589c5868eedad1243cfc2a1e83a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab48d1a41d2154122e7f4aae570a1db6b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__groupSpiHw.html#gab48d1a41d2154122e7f4aae570a1db6b">ccxSpiPinChipSelectSet</a> (uint8_t setValue)</td></tr>
<tr class="memdesc:gab48d1a41d2154122e7f4aae570a1db6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the state of the Chip Select (CS) line.  <a href="#gab48d1a41d2154122e7f4aae570a1db6b">More...</a><br /></td></tr>
<tr class="separator:gab48d1a41d2154122e7f4aae570a1db6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d09cc844a503ff740bed4ed081f0df4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__groupSpiHw.html#ga0d09cc844a503ff740bed4ed081f0df4">ccxSpiPinSlaveOutRead</a> (uint8_t *currentValue)</td></tr>
<tr class="memdesc:ga0d09cc844a503ff740bed4ed081f0df4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the current state of the Slave Out (SO) line.  <a href="#ga0d09cc844a503ff740bed4ed081f0df4">More...</a><br /></td></tr>
<tr class="separator:ga0d09cc844a503ff740bed4ed081f0df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab452f18ffa5534ea0f01522fd8d80b66"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__groupSpiHw.html#gab452f18ffa5534ea0f01522fd8d80b66">ccxSpiTransaction</a> (uint8_t address, const uint8_t *writeBytes, uint8_t writeLength, uint8_t *readBytes, uint8_t readLength)</td></tr>
<tr class="memdesc:gab452f18ffa5534ea0f01522fd8d80b66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a SPI transaction to the CC1101, either read or write.  <a href="#gab452f18ffa5534ea0f01522fd8d80b66">More...</a><br /></td></tr>
<tr class="separator:gab452f18ffa5534ea0f01522fd8d80b66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9aa967fef0486971ef10e7bbc3378f78"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__groupSpiHw.html#ga9aa967fef0486971ef10e7bbc3378f78">ccxSpiDelay25us</a> (void)</td></tr>
<tr class="memdesc:ga9aa967fef0486971ef10e7bbc3378f78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide a reliable, 25 us delay.  <a href="#ga9aa967fef0486971ef10e7bbc3378f78">More...</a><br /></td></tr>
<tr class="separator:ga9aa967fef0486971ef10e7bbc3378f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Required MCU-to-CCxxxx functions. </p>
<p>If porting this driver to new hardware, the user must create the necessary function definitions and implement them as described. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9aa967fef0486971ef10e7bbc3378f78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9aa967fef0486971ef10e7bbc3378f78">&#9670;&nbsp;</a></span>ccxSpiDelay25us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ccxSpiDelay25us </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provide a reliable, 25 us delay. </p>
<p>Exact timing is not important, and assumed this will be implemented as a busy wait. </p>

</div>
</div>
<a id="ga195f83026d3def3fec3bb132bf3dcfa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga195f83026d3def3fec3bb132bf3dcfa4">&#9670;&nbsp;</a></span>ccxSpiInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ccxSpiInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the SPI hardware. </p>
<p>This function will be called when the CC1101 module is initialised. The implementation is expected to preform any necessary configuration, including:</p>
<ul>
<li>Set Chip Select (CS) line to output, initial value high. Due to the nature of the CC1101, this line is should be controlled by the driver, independently of the SPI hardware.</li>
<li>Prepare Slave In (SI), Slave Out (SO) and Clock (CLK) pins as per hardware requirements.</li>
<li>Configure the pin attached to the CC1101 GDO pin to input / interrupt. (Optional, but likely recommended depending on your implementation).</li>
</ul>
<h1><a class="anchor" id="sectionSpiConfiguration"></a>
SPI Configuration</h1>
<ul>
<li>Clock Frequency: The clock can run at 10 MHz if 100 ns delay added between each octet. Otherwise single access should be limited to 9 MHz, and burst access 6.5 MHz.</li>
<li>Clock phase: Data centered on first rising clock edge.</li>
<li>Clock polarity: Low when idle</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Refer to Texas Instruments Design Note DN503 for more information on interfacing over SPI. </dd></dl>

</div>
</div>
<a id="gab48d1a41d2154122e7f4aae570a1db6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab48d1a41d2154122e7f4aae570a1db6b">&#9670;&nbsp;</a></span>ccxSpiPinChipSelectSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ccxSpiPinChipSelectSet </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>setValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the state of the Chip Select (CS) line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">setValue</td><td>The desired state of the CS line.<ul>
<li>"1" for a high output (to not select the CC1101)</li>
<li>"0" for a low output (to select the CC1101) </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0d09cc844a503ff740bed4ed081f0df4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d09cc844a503ff740bed4ed081f0df4">&#9670;&nbsp;</a></span>ccxSpiPinSlaveOutRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ccxSpiPinSlaveOutRead </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>currentValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the current state of the Slave Out (SO) line. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">currentValue</td><td>The current state of the SO line:<ul>
<li>"1" the line is currently driven high by CC1101</li>
<li>"0" the line is currently driven low by CC1101</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<p>The SO line is used to indicate the readiness of the CC1101 to receive commands after the Chip Select line has been used to indicate interaction is desired. It is assumed the hardware implementation can read the state of this line when not immediately transmitting data over SPI. </p>

</div>
</div>
<a id="ga4ee589c5868eedad1243cfc2a1e83a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4ee589c5868eedad1243cfc2a1e83a4b">&#9670;&nbsp;</a></span>ccxSpiShutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ccxSpiShutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown the SPI hardware. </p>
<p>This will be called when the CC1101 module is shutdown. Depending on the user implementation of the above driver it may never be called. </p>

</div>
</div>
<a id="gab452f18ffa5534ea0f01522fd8d80b66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab452f18ffa5534ea0f01522fd8d80b66">&#9670;&nbsp;</a></span>ccxSpiTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ccxSpiTransaction </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>writeBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>writeLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>readBytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>readLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a SPI transaction to the CC1101, either read or write. </p>
<p>The transaction is expected to be blocking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The register address. This should be always be sent to the device as the first byte.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">writeBytes</td><td>Array of bytes to write. Length of the array is provided as <code>writeLength</code>. This can be <code>NULL</code>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">writeLength</td><td>The length of the <code>writeBytes</code> array. This can be 0.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">readBytes</td><td>Array to store read data into. Length of this array is provided as <code>readLength</code>. This can be <code>NULL</code>.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">readLength</td><td>Length of the array <code>readBytes</code>. This can be 0.</td></tr>
  </table>
  </dd>
</dl>
<h1><a class="anchor" id="sectionExampleTransfers"></a>
Example Transfers</h1>
<p>The following depecits some example transfers: </p><div class="fragment"><div class="line">writeLength == 0 and readLength == 0 </div><div class="line">Write:   | address           | </div><div class="line">Read:    | status            | </div><div class="line"></div><div class="line">writeLength == 1 and readLength == 0</div><div class="line">Write:   | address           | </div><div class="line">Read:    | status            | </div><div class="line"></div><div class="line">writeLength == 3 and readLength == 0</div><div class="line">Write:   | address           | write byte 0  | write byte 1  | write byte 2</div><div class="line">Read:    | status            | status        | status        | status        </div><div class="line"></div><div class="line">readLength == 1 and writeLength == 0</div><div class="line">Write:   | address           |   - </div><div class="line">Read:    | status            | read byte 0 </div><div class="line"></div><div class="line">readLength == 3 and writeLength == 0</div><div class="line">Write:   | address           |   -           |   -           |   -</div><div class="line">Read:    | status            | read byte 0   | read byte 1   | read byte 2</div></div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
